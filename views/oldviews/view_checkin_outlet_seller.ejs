<% include layout/header %>
<% include layout/navigation %>

<div class="m-content">
    <div class="m-portlet m-portlet--mobile">
        <div class="m-portlet__head">
            <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                    <h3 class="m-portlet__head-text">
                        Check In Outlet Seller
                    </h3>
                </div>
            </div>
        </div>
        <div class="m-portlet__body">
            <form id="foutlet" class="m-form m-form--fit m-form--label-align-right" action="/process-checkin-outlet"
                method="POST">
                <div class="modal-body">
                    <div class="form-group m-form__group row ">
                        <div class="col-lg-12">
                            <label>Outlet:</label>
                            <input type="hidden" class="form-control" id="_method" hidden name="_method" value="POST" />
                            <input type="hidden" id="typeOutlet" name="typeOutlet" value="2" />
                            <select id="outlet" class="form-control m-input" placeholder="Outlet" name="outlet">
                                <%outlet.data.data.sell.forEach(
                                    (rows) => { %>
                                        <option value="<%=rows.id%>"><%=rows.name%></option>
                                    <% }
                                )%>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn m-btn m-btn--gradient-from-focus m-btn--gradient-to-danger"
                        id="buttonadd">
                        CHECK IN
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<% include layout/footer %>
<% include layout/script %>

<script type="text/javascript">

    $('#buttonadd').click(function () {
        var form = $('#foutlet');
        $.ajax({
            url: $('#foutlet').attr('action'),
            data: $('#foutlet').serialize(),
            method: $('#_method').val(),
            success: function (res) {
                if (res) {
                    if (res.success == true) {
                        setInterval(() => { window.location.reload(); }, 1000);
                        swal({ position: "center", type: "success", title: res.message, showConfirmButton: !1, timer: 1500 })
                        Clear();
                    } else {
                        swal({ position: "center", type: "error", title: res.message, showConfirmButton: !1, timer: 1500 })
                    }
                }
            }
        })
    })
    function Clear() {
        var elements = document.getElementsByTagName("input");
        var elementsselect = document.getElementsByClassName("form-control");
        for (var ii = 0; ii < elements.length; ii++) {
            if (elements[ii].type == "text" || elements[ii].type == "number") {
                elements[ii].value = "";
            }
        }
        for (var ii = 0; ii < elementsselect.length; ii++) {
            elementsselect[ii].value = "";
        }
    }
</script>